<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Login</title>
    <link rel="stylesheet" type="text/css" href="/css/styleLogin.css">


</head>
<body>

<div class="background-wrap">
    <div class="background" >
</div>
</div>

<form name="loginForm" id="accesspanel" th:action="@{/login}" method="post">
    <h1 id="litheader">AVIATRADE</h1>
    <div class="inset">

        <div class="success" th:if="${success}">
            Success! Please login.
        </div>
        <p>
            <input  name="username" id="email" class="usernameInput" placeholder="Username">
        </p>
        <p>
            <input type="password"  name="password" id="password" placeholder="Password">
        </p>
        <div th:if="${param.error}" class="error">
            Invalid username or password
        </div>
        <input class="loginLoginValue" type="hidden" name="service" value="login" />
    </div>
    <p class="p-container">
        <input type="submit" name="Login" id="go" value="Login">
    </p>
</form>
<br>

<button class="open-button" id="open1" >Sign up</button>


<!-- MODAL -->
<div class="form-popup" id="myForm">
    <form id="registration" th:action="@{/register}" th:object="${newUser}" method="post" class="form-container">
        <h1>Registration</h1>

        <div class="alert" th:if="${exists}">
            User already exists! Please try again.
        </div>

        <label for="firstName"><b>First name</b></label>
        <input type="text" placeholder="First name" id="firstName" name="name" required>

        <label for="surname"><b>First name</b></label>
        <input type="text" placeholder="Last name" id="surname" name="surname" required>

        <label for="email"><b>Email</b></label>
        <input type="email"  placeholder="Enter Email"  name="email" required/>

        <div class="invalidInput1" th:if="${invalidInput}">
            Username must be 6 characters at least.
        </div>
        <input type="text" name="username"  placeholder="Username" id="polzovatel"  required/>

        <div class="invalidInput2" th:if="${invalidInput}">
            Password must be 8 characters at least.
        </div>
        <input type="password" placeholder="Password" id="porol" name="password" required>

        <button type="submit" class="btn">Sign up</button>
        <button type="submit" id="close2" class="btn cancel" >Close</button>

</form>



<script th:inline="javascript">
    (function() {
        var invalidInput = [[${invalidInput}]];
        var exists = [[${exists}]];

        var open1Id = document.getElementById("open1")
        var close1Id = document.getElementById("close2")

        function openForm() {
            document.getElementById("myForm").style.display = "block";
        }
        function closeForm() {
            document.getElementById("myForm").style.display = "none";
        }

        if (invalidInput) {
            openForm()
        }
        else if (exists) {
            openForm()
        }

        open1Id.addEventListener("click", function(){ openForm() });
        close1Id.addEventListener("click", function(){ closeForm() });

    })()
</script>

    </div>
</body>
</html>
